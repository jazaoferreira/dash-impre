import { Printer, PrinterStatus } from './types';

const rawPrinterData = `
ECOSYS M3040idn	COLOMBO	URBANISMO	URBANISMO	172.16.5.73
ECOSYS M3040idn	COLOMBO	URBANISMO	URBANISMO	172.16.5.76
TASKalfa 2553ci	COLOMBO	SECRETARIA	MEI	172.16.5.250
TASKalfa 306ci	COLOMBO	T.I	ADMINISTRATIVO/SUPORTE	172.16.5.1
TASKalfa 306ci	COLOMBO	PLANEJAMENTO	SECRETARIA DE PLANEJAMENTO	172.16.5.56
ECOSYS M3040idn	COLOMBO	ADMINISTRAÇÃO	GERÊNCIA DE COMPRAS	172.16.5.7
ECOSYS M3040idn	COLOMBO	PROCURADORIA	PROCURADORIA	172.16.5.130
TASKalfa 2553ci	COLOMBO	URBANISMO	PROJETOS	172.16.5.77
TASKalfa 306ci	COLOMBO	CULTURA	ADMINISTRATIVO	172.16.5.230
ECOSYS M3040idn	COLOMBO	PROCURADORIA	PROCURADORIA	172.16.5.129
ECOSYS M3040idn	COLOMBO	AGRICULTURA	ABASTECIMENTO	172.16.5.70
ECOSYS P3055dn	COLOMBO	GESTÃO TRIBUTÁRIA	TRIBUTÁRIO	172.16.5.9
TASKalfa 5002i	COLOMBO	GESTÃO TRIBUTÁRIA	TRIBUTAÇÃO	172.16.5.55
ECOSYS M3040idn	COLOMBO	AGRICULTURA	NOTAS	172.16.5.71
ECOSYS M3145idn	COLOMBO	ADMINISTRAÇÃO	EMPENHO	172.16.5.225
ECOSYS M3145idn	COLOMBO	ADMINISTRAÇÃO	FROTAS - SEC OBRAS	172.16.5.24
TASKalfa 3051ci	COLOMBO	OBRAS	ENGENHARIA	172.16.5.22
ECOSYS M3145idn	COLOMBO	SECRETARIA DE SAÚDE	CME	172.16.5.231
ECOSYS M3145idn	COLOMBO	ADMINISTRAÇÃO	VIGILÂNCIA SANITÁRIA - CORREDOR	172.16.5.237
ECOSYS M3145idn	COLOMBO	ADMINISTRAÇÃO	ADM	172.16.5.245
ECOSYS M2040dn	COLOMBO	ADMINISTRAÇÃO	PROJETOS	172.16.5.156
SL-M4070FR	COLOMBO	BACKUP	Armazém da Família	172.16.5.206
CS 2552ci	COLOMBO	ADMINISTRAÇÃO	SEC. ADMINISTRAÇÃO - CENTRAL DE CÓPIAS	172.16.5.100
ECOSYS M3145idn	COLOMBO	ADMINISTRAÇÃO	FATURAMENTO	172.16.5.242
ECOSYS M2040dn	COLOMBO	GESTÃO SUAS	RH / ADMINISTRAÇÃO	172.16.5.209
TASKalfa 406ci	COLOMBO	SERVIÇO DE CONVIVÊNCIA E FORTALECIMENTO DE VINCULOS	CENTRO DE CONVIVÊNCIA	172.16.5.141
ECOSYS M3040idn	COLOMBO	ADMINISTRAÇÃO	REG. MARACANÃ - PROTOCOLO GUICHÊ 15	172.16.5.122
ECOSYS M3145idn	COLOMBO	EDUCAÇÃO	SALA DA MÔNICA	172.16.5.110
ECOSYS M3550idn	COLOMBO	PROTEÇÃO SOCIAL BÁSICA	DEPAC	172.16.5.115
ECOSYS M3040idn	COLOMBO	EDUCAÇÃO	SEC. EDUC - ADM - COMPRAS	172.16.5.107
ECOSYS M2040dn	COLOMBO	ADMINISTRAÇÃO	DEPARTAMENTO JUVENTUDE	172.16.5.103
ECOSYS M3145idn	COLOMBO	EDUCAÇÃO	SEMED - SUPRIMENTO PESSOAL	172.16.5.104
TASKalfa 306ci	COLOMBO	EDUCAÇÃO	EDUCAÇÃO INFANTIL	172.16.5.108
TASKalfa 406ci	COLOMBO	GESTÃO SUAS	GESTÃO SUAS	172.16.5.118
ECOSYS M3145idn	COLOMBO	EDUCAÇÃO	EM CRISTÓVÃO COLOMBO - SECRETARIA	172.16.5.140
ECOSYS M3145idn	COLOMBO	MEIO AMBIENTE	SEC MEIO AMBIENTE	172.16.5.176
ECOSYS M3145idn	COLOMBO	ADMINISTRAÇÃO	RH	172.16.5.157
ECOSYS M3145idn	COLOMBO	EDUCAÇÃO	PREFEITURA DE COLOMBO - TRIBUTAÇÃO 	172.16.5.251
ECOSYS M2040dn	COLOMBO	ADMINISTRAÇÃO	IPTU	172.16.5.13
TASKalfa 406ci	COLOMBO	VIGILÂNCIA	VIGILÂNCIA SANITÁRIA	172.16.5.251
TASKalfa 406ci	COLOMBO	HABITAÇÃO	HABITAÇÃO	172.16.5.252
ECOSYS M3655idn	COLOMBO	GESTÃO TRIBUTÁRIA	IPTU	172.16.5.3
TASKalfa 2552ci	COLOMBO	REGIONAIS	ASSESSORIA GABINETE	172.16.5.126
ECOSYS M3550idn	COLOMBO	GESTÃO TRIBUTÁRIA	CADASTRO TÉCNICO	172.16.5.14
M 320F	COLOMBO	SECRETARIA DE SAÚDE	SALA DA DIREÇÃO	172.16.5.162
ECOSYS M2040dn	COLOMBO	PROCURADORIA	EXECUTIVO FISCAL	172.16.5.8
TASKalfa 406ci	COLOMBO	HABITAÇÃO	FISCALIZACAO	172.16.5.72
M 320F	COLOMBO	EDUCAÇÃO	ALIMENTAÇÃO ESCOLAR	172.16.5.102
M 320F	COLOMBO	Recursos Humanos	JUNTA MILITAR 	172.16.5.127
P 311	COLOMBO	REGIONAIS	FARMACIA DO ESTADO	172.16.5.133
TASKalfa 406ci	COLOMBO	REGIONAIS	GOVERNO	172.16.5.19
M 320F	COLOMBO	SECRETARIA DE OBRAS	ESTOQUE	172.16.5.27
M 320F	COLOMBO	REGIONAIS	REGIONAL MARACANA	172.16.5.125
ECOSYS M3655idn	COLOMBO	ADMINISTRAÇÃO	LICITACAO	172.16.5.44
M 320F	COLOMBO	SECRETARIA DE INDUSTRIA COMERCIO E TURISMO	SALA DO EMPREENDEDOR	172.16.5.137
M 320F	COLOMBO	TURISMO	INDUSCOM	172.16.5.233
M 320F	COLOMBO	ATENÇÃO BÁSICA	FARMACIA MUNICIPAL - REGIONAL MARACANÃ	172.16.5.119
M 320F	COLOMBO	PROTOCOLO	PROTOCOLO - FUNDOS	172.16.5.249
TASKalfa 308ci	COLOMBO	GABINETE	GABINETE - SEDE	172.16.5.131
ECOSYS M2040dn	COLOMBO	OBRAS	SECRETARIA DE OBRAS - RECEPÇÃO	172.16.5.23
ECOSYS M3145idn	COLOMBO	SECRETARIA DE ASSISTÊNCIA SOCIAL	SALA FABIOLA - FABRICIO	172.16.5.114
ECOSYS M3040idn	COLOMBO	ADMINISTRAÇÃO	PROTOCOLO - SEDE	172.16.5.197
ECOSYS M3040idn	COLOMBO	REGIONAIS	PROTOCOLO - REGIONAL MARACANÃ	172.16.5.121
ECOSYS M3655idn	COLOMBO	SECRETARIA DE SAÚDE	CME - SMS	172.16.5.230
ECOSYS M3040idn	COLOMBO	SEMAS	PROTEÇÃO BASICA-SALA 05	172.16.5.111
ECOSYS M3655idn	COLOMBO	Recursos Humanos	RH	172.16.5.25
ECOSYS M3040idn	COLOMBO	ADMINISTRAÇÃO	REGIONAL MARACANA - FARMACIA	172.16.5.139
M 320F	COLOMBO	URBANISMO	URBANISO - RECEPÇÃO	172.16.5.78
TASKalfa 406ci	COLOMBO	Recursos Humanos	SALA CENTRAL RH	172.16.5.231
M 320F	COLOMBO	IDENTIFICAÇÃO E JUNTA MILITAR	IDENTIFICACAO REGIONAL MARACANA	172.16.5.215
M 320F	COLOMBO	T.I	SALA DA T.I (Helenildo)	172.16.5.101
TASKalfa 406ci	COLOMBO	ADMINISTRAÇÃO	ESCOLA DE GESTÃO 	172.16.5.208
TASKalfa 2552ci	COLOMBO	TURISMO	TURISMO	172.16.5.32
ECOSYS M2040dn	COLOMBO	CONSELHO TUTELAR	CONSELHOS - REGIONAL MARACANA - CONSELHOS	172.16.5.112
M 320F	COLOMBO	JURIDICO	PROCURADORIA CONTENCIOSO	172.16.5.205
P 311	COLOMBO	SECRETARIA	T.I SEDE	172.16.5.2
P 311	COLOMBO	EDUCAÇÃO	SEDUH- (REGIONAL MARACANÃ 3º ANDAR)	172.16.5.105
P 311	COLOMBO	Recursos Humanos	RH - SALA CINTIA	172.16.5.53
P 311	COLOMBO	AGRICULTURA	SALA ALINE	172.16.5.200
ECOSYS M2040dn	COLOMBO	ADMINISTRAÇÃO	ALMOXARIFADO	172.16.5.201
ECOSYS M2040dn	COLOMBO	SECRETARIA DE SAÚDE	(ATENÇÃO BÁSICA)	172.16.5.154
ECOSYS M2040dn	COLOMBO	MEIO AMBIENTE	ZELADORIA	172.16.5.117
ECOSYS M2040dn	COLOMBO	SECRETARIA DE SAÚDE	CME - CENTRO DE MARCAÇÃO DE EXAMES	172.16.5.221
ECOSYS M5526cdw	COLOMBO	AGRICULTURA	ARMAZEM DA FAMILIA - 2ANDAR - COORDENAÇÃO	172.16.5.51
ECOSYS M3655idn	COLOMBO	Recursos Humanos	RH RECEPÇÃO	172.16.5.15
M 320F	COLOMBO	SECRETARIA DE SAÚDE	NUTRIÇÃO	172.16.5.10
ECOSYS M3655idn	COLOMBO	CONTABILIDADE	CONTABILIDADE	172.16.5.18
M 320F	COLOMBO	SECRETARIA DE ASSISTÊNCIA SOCIAL	SEMAS - ASSISTÊNCIA JURÍDICA SALA 3	172.16.5.145
ECOSYS M2040dn	COLOMBO	GESTÃO SUAS	GABINETE	172.16.5.113
ECOSYS M3040idn	COLOMBO	ADMINISTRAÇÃO	COMPRAS	172.16.5.10
M 320F	COLOMBO	CONTABILIDADE	CONTABILDIDADE 2	172.16.5.237
TASKalfa 3554ci	COLOMBO	EDUCAÇÃO	SEMED - EDUCAÇÃO INFANTIL	172.16.5.120
ECOSYS M6235cidn	COLOMBO	GESTÃO SUAS	DPIPCD-PESSOA IDOSA E PESSOA COM DEFICIENCIA	172.16.5.246
ECOSYS M6235cidn	COLOMBO	MULHER, FAMILIA E DIREITOS HUMANOS	REGIONAL OSASCO - SEC MULHER / FAMILIA / DIREITOS HUMANOS - 2° ANDAR	172.16.5.187
TASKalfa 3554ci	COLOMBO	SECRETARIA DE OBRAS	OBRAS	172.16.5.26
ECOSYS M6235cidn	COLOMBO	SECRETARIA DE INDUSTRIA COMERCIO E TURISMO	INDUSTRIA E COMERCIO EM COLOMBO	172.16.5.198
ECOSYS M2040dn	COLOMBO	IDENTIFICAÇÃO E JUNTA MILITAR	IDENTIFICAÇÃO SEDE	172.16.5.46
ECOSYS M5526cdw	COLOMBO	SECRETARIA DE SAÚDE	COMPRAS	172.16.5.244
ECOSYS M2040dn	COLOMBO	T.I	SECRETARIA DA JUVENTUDE	172.16.5.228
ECOSYS M3040idn	COLOMBO	GESTÃO TRIBUTÁRIA	TRIBUTAÇÃO - REGIONAL MARACANÃ	172.16.5.124
ECOSYS M3145idn	COLOMBO	ADMINISTRAÇÃO	PROTOCOLO	172.16.5.253
CS 3252ci	COLOMBO		COLOMBO / HABITAÇÃO 	172.16.5.255
ECOSYS M3655idn	COLOMBO	PROCURADORIA	CONTENCIOSO - PREDIO DO MINISTERIO PUBLICO	172.16.5.203
ECOSYS M2040dn	COLOMBO	MULHER, FAMILIA E DIREITOS HUMANOS	SECRETARIA DA MULHER	172.16.5.232
ECOSYS M3550idn	COLOMBO	PROCURADORIA	EXECUTIVO FISCAL	172.16.5.7
M 320F	COLOMBO	GABINETE	REGIONAL MARACANÃ	172.16.5.128
P 311	COLOMBO	PLANEJAMENTO	(SALA IGOR)	172.16.5.74
M 320F	COLOMBO		AGENCIA DO TRABALHADOR	172.16.5.152
`;

const staticPrinters = rawPrinterData
    .split('\n')
    .filter(line => line.trim() !== '')
    .map(line => {
        const parts = line.split('\t');
        if (parts.length < 5) return null;
        return {
            model: parts[0].trim(),
            department: parts[2].trim() || 'N/A',
            location: parts[3].trim(),
            ip: parts[4].trim(),
        };
    })
    // Fix: Changed .match() to .test() to return a boolean value for the filter function.
    .filter((p): p is {model: string, department: string, location: string, ip: string} => p !== null && /\d+\.\d+\.\d+\.\d+/.test(p.ip));


// Helper function for seeded random number generation to ensure consistent data per printer
function seededRandom(seed: number): number {
    const x = Math.sin(seed) * 10000;
    return x - Math.floor(x);
}

export const generatePrinterData = (): Printer[] => {
    return staticPrinters.map((p, index) => {
        const seed = index + 1; // Use index as a seed for consistent "random" values per printer

        // --- Generate FIXED base properties using the seed ---
        const baseTonerLevel = Math.floor(seededRandom(seed * 2) * 100) + 1; // 1 to 100
        const pageCount = 50000 + Math.floor(seededRandom(seed * 4) * 200000);
        const serial = `${p.model.substring(0, 2).toUpperCase()}-${(1000000 + seededRandom(seed * 5) * 9000000).toString().substring(0, 7)}`;

        // --- Determine CONSISTENT status using the seed ---
        const isOffline = seededRandom(seed * 3) < 0.2; // 20% chance, but now fixed per printer
        
        let finalStatus: PrinterStatus;
        let displayedTonerLevel = baseTonerLevel;

        if (isOffline) {
            finalStatus = PrinterStatus.Offline;
            displayedTonerLevel = 0; // Offline printers don't report toner level
        } else {
            finalStatus = PrinterStatus.Online;
        }

        return {
            id: `${p.ip}-${index}`,
            ...p,
            status: finalStatus,
            tonerLevel: displayedTonerLevel,
            pageCount,
            serial,
        };
    });
};